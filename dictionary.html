<!doctype html><html><head>
  <meta charset="utf-8">
  <title>Voices of the Land — Dictionary (Cree)</title>
  <meta name="viewport" content="width=device-width,initial-scale:1" />
  <style>
    :root{--bg:#f5efe6;--card:#fff9f2;--accent:#8a4b2a;--muted:#6b5847;}
    body{font-family:Inter, Arial, sans-serif;background:var(--bg);color:var(--muted);padding:20px;margin:0;}
    .wrap{max-width:900px;margin:0 auto;background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.05)}
    h1{color:var(--accent);margin:0 0 8px}
    .entry{border-bottom:1px dashed #e7ded4;padding:12px 0}
    .word{font-size:18px;font-weight:700;color:#3f2b20}
    .syllabics{font-size:20px;font-weight:500;color:#3f2b20;margin-top:4px;}
    .meta{font-size:13px;color:#7a6a5f;margin-top:6px}
    .translation{margin-top:6px; padding-left: 10px;}
    audio{margin-top:8px;width:100%}
    .main-nav{background-color:var(--accent);border-radius:8px;margin-bottom:20px;overflow:hidden;}
    .main-nav ul{list-style:none;margin:0;padding:0;display:flex;flex-wrap:wrap;justify-content:center;}
    .main-nav a{display:block;padding:12px 18px;text-decoration:none;color:white;font-weight:600;font-size:15px;}
    .main-nav a:hover{background-color:var(--accent-2);}
  </style></head><body>
  <div class="wrap">
    <nav class="main-nav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="submit.html">Submit a Word</a></li>
        <li><a href="dictionary.html">Public Dictionary</a></li>
        <li><a href="admin.html">Admin Review</a></li>
      </ul>
    </nav>

    <h1>Public Dictionary (Verified)</h1>
    <p class="meta">Compiled entries verified by community Elders. If you submitted a word, check with Elders for publication status.</p>
    <div id="list">Loading...</div>
  </div><script>
    // --- THIS IS YOUR WORKING LINK ---
    // You must use the link from your most recent, successful deployment
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbw27lNpaPmfAktNrBl3eZgQ-xA2xDkMhiC7-_KCfk9RLKdxAE_y_BBFP-ulPC3oO1zHpg/exec?cmd=listVerified";
    // --- END LINK ---

async function load() {
  const container = document.getElementById('list');
  try {
    const resp = await fetch(WEB_APP_URL);
    if (!resp.ok) { throw new Error(`HTTP error! Status: ${resp.status}`); }
    const j = await resp.json();
    
    container.innerHTML = "";
    if (!j.entries || j.entries.length === 0) {
      container.innerHTML = "<p>No verified entries yet.</p>";
      return;
    }
    
    j.entries.forEach(e => {
      const div = document.createElement('div'); div.className = "entry";
      // This is the direct download link format for Google Drive
      const audioLink = `https://drive.google.com/uc?export=download&id=${e.audioId}`;

      div.innerHTML = `
        <div class="word">${e.indigenousText}</div>
        ${e.syllabics ? `<div class="syllabics">${e.syllabics}</div>` : ""}
        <div class="translation"><b>English:</b> ${e.englishText}</div>
        ${e.frenchText ? `<div class="translation"><b>French:</b> ${e.frenchText}</div>` : ""}
        ${e.pronunciation ? `<div class="translation"><b>Pronunciation:</b> ${e.pronunciation}</div>` : ""}
        <div class="meta">Community: ${e.community || "Cree"} • Submitted by: ${e.submitter || "Anonymous"} • ${new Date(e.timestamp).toLocaleString()}</div>
        ${e.audioId ? `<div style="margin-top:8px"><audio controls src="${audioLink}"></audio></div>` : ""}
      `;
      container.appendChild(div);
    });
  } catch (err) {
    console.error("Load Error:", err);
    container.textContent = "Error loading dictionary: " + err.message;
  }
}load();</script></body></html>
