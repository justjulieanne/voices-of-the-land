<!doctype html><html><head>
  <meta charset="utf-8" />
  <title>Voices of the Land â€” Submit (Cree)</title>
  <meta name="viewport" content="width=device-width,initial-scale:1" />
  <style>
    :root{--bg:#f5efe6; --card:#fff9f2; --accent:#8a4b2a; --accent-2:#b33a2a; --muted:#6b5847;}
    body{font-family:Inter, Arial, sans-serif;background:var(--bg);color:var(--muted);padding:22px;margin:0;}
    .wrap{max-width:720px;margin:0 auto;background:var(--card);padding:20px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.06);}
    h1{color:var(--accent);margin:0 0 6px;font-size:20px}
    label{display:block;margin-top:12px;font-weight:600}
    input[type=text], textarea, select {width:100%;padding:10px;border:1px solid #e6dcd1;border-radius:8px;margin-top:6px;}
    .controls{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
    button{background:var(--accent);color:white;border:none;padding:10px 12px;border-radius:8px;cursor:pointer}
    button.secondary{background:transparent;color:var(--accent);border:1px solid var(--accent)}
    button:disabled{background-color:#ccc;cursor:not-allowed;}
    .muted{color:#7a6a5f;font-size:13px}
    .consent{margin-top:10px;display:flex;align-items:center;gap:8px}
    audio{margin-top:8px;width:100%}
    .result{margin-top:12px;font-weight:600}
    .main-nav{background-color:var(--accent);border-radius:8px;margin-bottom:20px;overflow:hidden;}
    .main-nav ul{list-style:none;margin:0;padding:0;display:flex;flex-wrap:wrap;justify-content:center;}
    .main-nav a{display:block;padding:12px 18px;text-decoration:none;color:white;font-weight:600;font-size:15px;}
    .main-nav a:hover{background-color:var(--accent-2);}
  </style>
</head>
<body>
  <div class="wrap">
    <nav class="main-nav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="submit.html">Submit a Word</a></li>
        <li><a href="dictionary.html">Public Dictionary</a></li>
        <li><a href="admin.html">Admin Review</a></li>
      </ul>
    </nav>
    
    <h1>Submit a Word (Cree)</h1>
    <p class="muted">Share a word or phrase. Submissions will be reviewed by community Elders before being published.</p>

    <label>Community
      <select id="community" aria-label="community">
        <option value="Cree">Cree</option>
      </select>
    </label>

    <label>Submitter name (optional)
      <input id="submitter" type="text" placeholder="Your name (or leave blank for anonymous)" />
    </label>

    <label>Indigenous text (word or phrase)
      <input id="indigenousText" type="text" placeholder="Enter word or phrase in Cree" />
    </label>

    <label>English translation
      <input id="englishText" type="text" placeholder="Enter English translation" />
    </label>

    <label>French translation
      <input id="frenchText" type="text" placeholder="Enter French translation" />
    </label>

    <label>Notes (usage, dialect notes, context)
      <textarea id="notes" rows="3" placeholder="Optional notes for Elders or learners"></textarea>
    </label>

    <div style="margin-top:12px;">
      <p class="muted">Record audio (optional)</p>
      <div class="controls">
        <button id="startBtn">Start Recording</button>
        <button id="stopBtn" disabled>Stop</button>
        <button id="playBtn" class="secondary" disabled>Play</button>
      </div>
      <div id="recStatus" class="muted" style="margin-top:6px"></div>
      <audio id="player" controls style="display:none"></audio>
    </div>
    
    <div class="consent">
      <input type="checkbox" id="consent" />
      <label for="consent">I confirm I have permission to share this word, and understand it may be made public after Elder verification.</label>
    </div>

    <div style="margin-top:14px;">
      <button id="submitBtn">Submit</button>
      <button id="clearBtn" class="secondary">Clear</button>
    </div>

    <div id="result" class="result"></div>
  </div>

  <script>
    // --- THIS IS THE CORRECT, WORKING LINK ---
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzNdKdXnUYq69XDrn64l2AeiOC7YM2lGfZ-UFmfXm-0UukJvIvMHKaSH9TOONMVZncl/exec";
    // --- END LINK ---
    
    let mediaRecorder, recordedChunks = [], audioMime = "audio/webm";
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const playBtn = document.getElementById('playBtn');
    const player = document.getElementById('player');
    const recStatus = document.getElementById('recStatus');
    const submitBtn = document.getElementById('submitBtn');

    startBtn.onclick = async () => {
      recordedChunks = [];
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.ondataavailable = e => { if (e.data.size > 0) recordedChunks.push(e.data); };
        mediaRecorder.onstop = () => {
          const blob = new Blob(recordedChunks, { type: audioMime });
          const url = URL.createObjectURL(blob);
          player.src = url; player.style.display = "block"; playBtn.disabled = false;
          recStatus.textContent = `Recorded ${Math.round(blob.size/1000)} KB`;
          window._latestBlob = blob;
        };
        mediaRecorder.start();
        startBtn.disabled = true; stopBtn.disabled = false;
        recStatus.textContent = "Recording...";
      } catch (err) {
        alert("Microphone access is required to record audio.");
      }
    };

    stopBtn.onclick = () => {
      if (mediaRecorder && mediaRecorder.state === "recording") mediaRecorder.stop();
      startBtn.disabled = false; stopBtn.disabled = true;
    };

    playBtn.onclick = () => {
      if (player.src) player.play();
    };
    
    document.getElementById('clearBtn').onclick = () => {
      document.getElementById('submitter').value = "";
      document.getElementById('indigenousText').value = "";
      document.getElementById('englishText').value = "";
      document.getElementById('frenchText').value = ""; 
      document.getElementById('notes').value = "";
      player.src = ""; player.style.display = "none";
      window._latestBlob = null;
      recStatus.textContent = "";
      document.getElementById('consent').checked = false;
      document.getElementById('result').textContent = "";
    };

    submitBtn.onclick = async () => {
      const submitter = document.getElementById('submitter').value.trim();
      const community = document.getElementById('community').value;
      const indigenousText = document.getElementById('indigenousText').value.trim();
      const englishText = document.getElementById('englishText').value.trim();
      const frenchText = document.getElementById('frenchText').value.trim(); 
      const notes = document.getElementById('notes').value.trim();
      const consent = document.getElementById('consent').checked;

      if (!indigenousText || !englishText) {
        alert("Please provide at least Indigenous text and English translation.");
        return;
      }
      if (!consent)
